<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ALPHA ‚Äî AI Finance Intelligence Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Serif+Display:ital@0;1&family=DM+Mono:wght@300;400;500&family=Sora:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #020b12;
    --surface: #061520;
    --border: rgba(0, 220, 130, 0.15);
    --green: #00dc82;
    --green-dim: rgba(0, 220, 130, 0.08);
    --amber: #f5a623;
    --red: #ff4a6e;
    --text: #e8f4f0;
    --muted: rgba(232, 244, 240, 0.45);
    --mono: 'DM Mono', monospace;
    --yellow: #FFE600;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: var(--bg); color: var(--text); font-family: 'Sora', sans-serif; overflow-x: hidden; cursor: none; }

  .cursor { width: 12px; height: 12px; background: var(--green); border-radius: 50%; position: fixed; pointer-events: none; z-index: 9999; transition: transform 0.15s ease; mix-blend-mode: screen; }
  .cursor-ring { width: 36px; height: 36px; border: 1px solid rgba(0,220,130,0.4); border-radius: 50%; position: fixed; pointer-events: none; z-index: 9998; transition: all 0.3s cubic-bezier(0.175,0.885,0.32,1.275); }

  body::before { content:''; position:fixed; inset:0; background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E"); opacity:0.6; pointer-events:none; z-index:1000; }

  /* NAV */
  nav { position:fixed; top:0; left:0; right:0; z-index:100; display:flex; align-items:center; justify-content:space-between; padding:24px 60px; background:linear-gradient(to bottom,rgba(2,11,18,0.95),transparent); backdrop-filter:blur(2px); }
  .logo { font-family:'Bebas Neue',sans-serif; font-size:28px; letter-spacing:3px; color:var(--text); display:flex; align-items:center; gap:10px; }
  .logo-dot { width:8px; height:8px; background:var(--green); border-radius:50%; box-shadow:0 0 16px var(--green); animation:pulse 2s infinite; }
  .nav-links { display:flex; gap:40px; list-style:none; }
  .nav-links a { font-size:12px; font-weight:300; letter-spacing:2px; text-transform:uppercase; color:var(--muted); text-decoration:none; transition:color 0.3s; }
  .nav-links a:hover { color:var(--green); }
  .nav-links a.active-nav { color:var(--green); }
  .nav-cta { font-family:var(--mono); font-size:12px; letter-spacing:1px; padding:10px 24px; background:transparent; border:1px solid var(--green); color:var(--green); cursor:none; transition:all 0.3s; }
  .nav-cta:hover { background:var(--green); color:var(--bg); }

  /* USER NAV PILL (shown when logged in) */
  .user-pill { display:none; align-items:center; gap:10px; font-family:var(--mono); font-size:12px; }
  .user-pill.visible { display:flex; }
  .user-avatar { width:32px; height:32px; border-radius:50%; background:var(--green); display:flex; align-items:center; justify-content:center; color:var(--bg); font-weight:700; font-size:13px; }
  .user-name { color:var(--text); letter-spacing:1px; }
  .btn-logout { font-family:var(--mono); font-size:11px; letter-spacing:1px; padding:7px 16px; background:transparent; border:1px solid rgba(255,74,110,0.4); color:var(--red); cursor:none; transition:all 0.3s; }
  .btn-logout:hover { background:var(--red); color:#fff; }

  /* TICKER */
  .ticker-bar { position:fixed; top:0; left:0; right:0; height:3px; background:linear-gradient(90deg,transparent,var(--green),transparent); z-index:101; }
  .live-ticker { position:fixed; bottom:0; left:0; right:0; height:36px; background:rgba(0,220,130,0.05); border-top:1px solid var(--border); overflow:hidden; z-index:100; display:flex; align-items:center; }
  .ticker-label { font-family:var(--mono); font-size:10px; letter-spacing:2px; color:var(--green); padding:0 20px; border-right:1px solid var(--border); white-space:nowrap; height:100%; display:flex; align-items:center; }
  .ticker-scroll { display:flex; gap:60px; animation:ticker 30s linear infinite; white-space:nowrap; }
  .ticker-item { font-family:var(--mono); font-size:11px; display:flex; gap:10px; align-items:center; }
  .ticker-sym { color:var(--text); font-weight:500; }
  .ticker-price { color:var(--muted); }
  .up { color:var(--green); }
  .down { color:var(--red); }

  /* HERO */
  .hero { min-height:100vh; display:grid; grid-template-columns:1fr 1fr; position:relative; overflow:hidden; }
  .hero-left { display:flex; flex-direction:column; justify-content:center; padding:140px 60px 100px; position:relative; z-index:2; }
  .hero-tag { font-family:var(--mono); font-size:11px; letter-spacing:3px; text-transform:uppercase; color:var(--green); margin-bottom:32px; display:flex; align-items:center; gap:12px; }
  .hero-tag::before { content:''; display:block; width:32px; height:1px; background:var(--green); }
  .hero-title { font-family:'Bebas Neue',sans-serif; font-size:clamp(64px,7vw,110px); line-height:0.92; letter-spacing:2px; margin-bottom:28px; animation:slideUp 1s ease forwards; opacity:0; transform:translateY(40px); }
  .hero-title em { font-family:'DM Serif Display',serif; font-style:italic; color:var(--green); font-size:0.9em; }
  .hero-sub { font-size:15px; font-weight:300; line-height:1.8; color:var(--muted); max-width:440px; margin-bottom:52px; animation:slideUp 1s 0.2s ease forwards; opacity:0; transform:translateY(40px); }
  .hero-actions { display:flex; gap:20px; align-items:center; animation:slideUp 1s 0.4s ease forwards; opacity:0; transform:translateY(40px); }
  .btn-primary { font-family:var(--mono); font-size:13px; letter-spacing:1px; padding:16px 36px; background:var(--green); color:var(--bg); border:none; cursor:none; position:relative; overflow:hidden; font-weight:500; transition:all 0.3s; }
  .btn-primary::after { content:''; position:absolute; top:0; left:-100%; width:100%; height:100%; background:rgba(255,255,255,0.2); transform:skewX(-20deg); transition:left 0.4s; }
  .btn-primary:hover::after { left:150%; }
  .stats-strip { display:flex; gap:0; margin-top:70px; border-top:1px solid var(--border); padding-top:30px; animation:slideUp 1s 0.6s ease forwards; opacity:0; transform:translateY(20px); }
  .stat-item { padding-right:36px; margin-right:36px; border-right:1px solid var(--border); }
  .stat-item:last-child { border-right:none; }
  .stat-num { font-family:'Bebas Neue',sans-serif; font-size:36px; letter-spacing:2px; color:var(--text); }
  .stat-label { font-family:var(--mono); font-size:10px; letter-spacing:2px; color:var(--muted); text-transform:uppercase; }

  /* HERO RIGHT */
  .hero-right { position:relative; display:flex; align-items:center; justify-content:center; padding:120px 40px 80px; }
  .blob { position:absolute; border-radius:50%; filter:blur(80px); pointer-events:none; }
  .blob-1 { width:500px; height:500px; background:radial-gradient(circle,rgba(0,220,130,0.12) 0%,transparent 70%); top:50%; left:50%; transform:translate(-50%,-50%); }
  .blob-2 { width:300px; height:300px; background:radial-gradient(circle,rgba(245,166,35,0.08) 0%,transparent 70%); top:20%; right:10%; }
  .dashboard-card { width:100%; max-width:520px; background:rgba(6,21,32,0.8); border:1px solid var(--border); backdrop-filter:blur(20px); padding:28px; position:relative; animation:slideLeft 1s 0.3s ease forwards; opacity:0; transform:translateX(40px); }
  .dashboard-card::before { content:''; position:absolute; top:0; left:28px; right:28px; height:1px; background:linear-gradient(90deg,transparent,var(--green),transparent); }
  .card-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:24px; }
  .card-title { font-family:var(--mono); font-size:11px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); }
  .live-badge { font-family:var(--mono); font-size:10px; letter-spacing:1px; color:var(--green); display:flex; align-items:center; gap:6px; }
  .live-dot { width:6px; height:6px; background:var(--green); border-radius:50%; box-shadow:0 0 8px var(--green); animation:pulse 1.5s infinite; }
  .chart-area { height:120px; margin-bottom:20px; position:relative; }
  .chart-area svg { width:100%; height:100%; }
  .ai-analysis { background:var(--green-dim); border:1px solid var(--border); padding:14px 16px; margin-bottom:20px; display:flex; gap:12px; align-items:flex-start; }
  .ai-icon { font-family:var(--mono); font-size:10px; color:var(--green); letter-spacing:1px; white-space:nowrap; padding-top:2px; }
  .ai-text { font-family:var(--mono); font-size:11px; line-height:1.7; color:var(--muted); }
  .ai-text strong { color:var(--green); font-weight:500; }
  .portfolio-rows { display:flex; flex-direction:column; gap:12px; }
  .port-row { display:flex; align-items:center; gap:12px; }
  .port-name { font-family:var(--mono); font-size:12px; font-weight:500; color:var(--text); width:52px; }
  .port-bar-wrap { flex:1; height:4px; background:rgba(255,255,255,0.05); border-radius:2px; overflow:hidden; }
  .port-bar { height:100%; border-radius:2px; transition:width 1s ease; }
  .port-pct { font-family:var(--mono); font-size:11px; width:44px; text-align:right; }
  .float-card { position:absolute; background:rgba(6,21,32,0.95); border:1px solid var(--border); padding:12px 16px; backdrop-filter:blur(20px); font-family:var(--mono); }
  .float-card-1 { top:120px; right:80px; animation:float 4s ease-in-out infinite, slideLeft 1s 0.7s ease forwards; opacity:0; transform:translateX(40px); }
  .float-card-2 { top:280px; right:160px; animation:float2 5s ease-in-out infinite, slideLeft 1s 0.9s ease forwards; opacity:0; transform:translateX(40px); }
  .float-label { font-size:9px; letter-spacing:2px; color:var(--muted); text-transform:uppercase; margin-bottom:4px; }
  .float-val { font-size:20px; font-weight:500; }

  /* FEATURES */
  .features { padding:120px 60px; position:relative; z-index:2; }
  .section-label { font-family:var(--mono); font-size:11px; letter-spacing:3px; text-transform:uppercase; color:var(--green); margin-bottom:16px; }
  .section-title { font-family:'Bebas Neue',sans-serif; font-size:clamp(42px,5vw,70px); letter-spacing:2px; line-height:1; margin-bottom:70px; max-width:600px; }
  .features-grid { display:grid; grid-template-columns:repeat(5,1fr); gap:0; border:1px solid var(--border); }
  .feat-card { padding:36px 28px; border-right:1px solid var(--border); position:relative; overflow:hidden; transition:background 0.4s; cursor:none; }
  .feat-card:last-child { border-right:none; }
  .feat-card::after { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:var(--green); transform:scaleX(0); transform-origin:left; transition:transform 0.4s; }
  .feat-card:hover::after { transform:scaleX(1); }
  .feat-card:hover { background:var(--green-dim); }
  .feat-num { font-family:'Bebas Neue',sans-serif; font-size:48px; color:rgba(0,220,130,0.1); line-height:1; margin-bottom:16px; letter-spacing:2px; }
  .feat-icon { font-size:22px; margin-bottom:16px; }
  .feat-name { font-family:'DM Serif Display',serif; font-size:18px; margin-bottom:12px; line-height:1.2; }
  .feat-desc { font-size:12px; font-weight:300; line-height:1.8; color:var(--muted); }

  /* NEWS */
  .news-section { padding:80px 60px; background:var(--surface); border-top:1px solid var(--border); border-bottom:1px solid var(--border); display:grid; grid-template-columns:1fr 1fr; gap:80px; align-items:center; }
  .news-list { display:flex; flex-direction:column; gap:0; }
  .news-item { padding:20px 0; border-bottom:1px solid var(--border); display:grid; grid-template-columns:48px 1fr auto; gap:16px; align-items:start; cursor:none; transition:background 0.3s; }
  .news-item:hover { background:var(--green-dim); margin:0 -20px; padding:20px; }
  .news-sentiment { font-family:var(--mono); font-size:9px; letter-spacing:1px; padding:4px 6px; text-transform:uppercase; margin-top:2px; text-align:center; }
  .bullish { background:rgba(0,220,130,0.15); color:var(--green); }
  .bearish { background:rgba(255,74,110,0.15); color:var(--red); }
  .neutral { background:rgba(245,166,35,0.15); color:var(--amber); }
  .news-headline { font-size:13px; line-height:1.6; color:var(--text); margin-bottom:4px; }
  .news-meta { font-family:var(--mono); font-size:10px; color:var(--muted); }
  .news-impact { font-family:var(--mono); font-size:14px; font-weight:500; }
  .ai-visual { display:flex; flex-direction:column; gap:20px; }
  .ai-title { font-family:'Bebas Neue',sans-serif; font-size:56px; line-height:1; letter-spacing:2px; }
  .ai-title em { font-family:'DM Serif Display',serif; font-style:italic; color:var(--green); font-size:0.85em; }
  .ai-desc { font-size:14px; font-weight:300; color:var(--muted); line-height:1.8; max-width:400px; }
  .ai-chips { display:flex; flex-wrap:wrap; gap:10px; margin-top:10px; }
  .chip { font-family:var(--mono); font-size:11px; letter-spacing:1px; padding:8px 16px; border:1px solid var(--border); color:var(--muted); transition:all 0.3s; cursor:none; }
  .chip:hover { border-color:var(--green); color:var(--green); }

  /* CTA */
  .cta-section { padding:140px 60px; text-align:center; position:relative; overflow:hidden; }
  .cta-section::before { content:''; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:600px; height:600px; background:radial-gradient(circle,rgba(0,220,130,0.07) 0%,transparent 70%); pointer-events:none; }
  .cta-eyebrow { font-family:var(--mono); font-size:11px; letter-spacing:3px; text-transform:uppercase; color:var(--green); margin-bottom:24px; }
  .cta-title { font-family:'Bebas Neue',sans-serif; font-size:clamp(60px,8vw,120px); line-height:0.9; letter-spacing:2px; margin-bottom:32px; }
  .cta-title em { font-family:'DM Serif Display',serif; font-style:italic; color:var(--green); }
  .cta-sub { font-size:14px; font-weight:300; color:var(--muted); max-width:480px; margin:0 auto 52px; line-height:1.8; }
  .cta-input-row { display:flex; max-width:460px; margin:0 auto; border:1px solid var(--border); }
  .cta-input { flex:1; background:rgba(6,21,32,0.8); border:none; padding:16px 20px; font-family:var(--mono); font-size:13px; color:var(--text); outline:none; }
  .cta-input::placeholder { color:var(--muted); }
  .cta-btn { font-family:var(--mono); font-size:12px; letter-spacing:1px; padding:16px 28px; background:var(--green); color:var(--bg); border:none; cursor:none; font-weight:600; white-space:nowrap; transition:opacity 0.3s; }
  .cta-btn:hover { opacity:0.85; }

  /* FOOTER */
  .footer { padding:30px 60px; border-top:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; margin-bottom:36px; }
  .footer-logo { font-family:'Bebas Neue',sans-serif; font-size:22px; letter-spacing:3px; color:var(--muted); }
  .footer-copy { font-family:var(--mono); font-size:11px; color:var(--muted); letter-spacing:1px; }
  .footer-links { display:flex; gap:28px; list-style:none; }
  .footer-links a { font-family:var(--mono); font-size:11px; color:var(--muted); text-decoration:none; letter-spacing:1px; transition:color 0.3s; }
  .footer-links a:hover { color:var(--green); }

  /* GRID BG */
  .grid-bg { position:absolute; inset:0; background-image:linear-gradient(rgba(0,220,130,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,220,130,0.03) 1px,transparent 1px); background-size:60px 60px; pointer-events:none; }

  /* ANIMATIONS */
  @keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:0.5;transform:scale(0.8)} }
  @keyframes slideUp { to{opacity:1;transform:translateY(0)} }
  @keyframes slideLeft { to{opacity:1;transform:translateX(0)} }
  @keyframes ticker { from{transform:translateX(0)} to{transform:translateX(-50%)} }
  @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-12px)} }
  @keyframes float2 { 0%,100%{transform:translateY(0)} 50%{transform:translateY(10px)} }
  @keyframes draw { from{stroke-dashoffset:1000} to{stroke-dashoffset:0} }
  @keyframes modalIn { from{opacity:0;transform:translateY(30px) scale(0.96)} to{opacity:1;transform:translateY(0) scale(1)} }
  @keyframes fadeIn { from{opacity:0} to{opacity:1} }

  /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODALS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
  .modal-overlay { display:none; position:fixed; inset:0; background:rgba(2,11,18,0.88); backdrop-filter:blur(18px); z-index:500; align-items:center; justify-content:center; }
  .modal-overlay.active { display:flex; animation:fadeIn 0.2s ease; }
  .modal-box { background:#061520; border:1px solid var(--border); max-width:540px; width:90%; padding:48px; position:relative; animation:modalIn 0.35s cubic-bezier(0.34,1.56,0.64,1) forwards; max-height:90vh; overflow-y:auto; }
  .modal-box::before { content:''; position:absolute; top:0; left:48px; right:48px; height:1px; background:linear-gradient(90deg,transparent,var(--green),transparent); }
  .modal-close { position:absolute; top:18px; right:20px; background:none; border:none; color:var(--muted); font-size:22px; cursor:none; transition:color 0.2s; line-height:1; }
  .modal-close:hover { color:var(--green); }
  .modal-tag { font-family:var(--mono); font-size:10px; letter-spacing:3px; text-transform:uppercase; color:var(--green); margin-bottom:14px; }
  .modal-title { font-family:'Bebas Neue',sans-serif; font-size:42px; letter-spacing:2px; line-height:1; margin-bottom:18px; }
  .modal-desc { font-size:13px; font-weight:300; color:var(--muted); line-height:1.9; margin-bottom:28px; }
  .modal-features { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:32px; }
  .modal-feat { padding:14px 16px; border:1px solid var(--border); font-family:var(--mono); font-size:11px; color:var(--muted); transition:all 0.25s; cursor:none; }
  .modal-feat:hover { border-color:var(--green); color:var(--text); }
  .modal-feat-icon { font-size:18px; margin-bottom:6px; }
  .modal-btn { font-family:var(--mono); font-size:13px; letter-spacing:1px; padding:14px 32px; background:var(--green); color:var(--bg); border:none; cursor:none; font-weight:600; transition:opacity 0.3s; width:100%; }
  .modal-btn:hover { opacity:0.85; }
  .modal-btn.outline { background:transparent; border:1px solid var(--green); color:var(--green); margin-top:10px; }
  .modal-btn.outline:hover { background:var(--green-dim); }
  .modal-btn.yellow { background:var(--yellow); color:#020b12; }
  .modal-btn.yellow:hover { opacity:0.85; }
  .modal-btn.danger { background:var(--red); color:#fff; }
  .modal-form { display:flex; flex-direction:column; gap:14px; }
  .modal-input { background:rgba(2,11,18,0.8); border:1px solid var(--border); padding:14px 16px; font-family:var(--mono); font-size:13px; color:var(--text); outline:none; transition:border-color 0.3s; width:100%; }
  .modal-input:focus { border-color:var(--green); }
  .modal-input::placeholder { color:var(--muted); }
  .modal-input.error { border-color:var(--red); }
  .modal-divider { display:flex; align-items:center; gap:12px; margin:10px 0; }
  .modal-divider::before,.modal-divider::after { content:''; flex:1; height:1px; background:var(--border); }
  .modal-divider span { font-family:var(--mono); font-size:10px; color:var(--muted); letter-spacing:2px; }
  .modal-link { font-family:var(--mono); font-size:11px; color:var(--muted); text-align:center; margin-top:14px; }
  .modal-link a { color:var(--green); text-decoration:none; }
  .modal-link a:hover { text-decoration:underline; }
  .field-error { font-family:var(--mono); font-size:10px; color:var(--red); letter-spacing:1px; margin-top:-8px; }

  /* Pricing */
  .pricing-grid { display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px; margin-bottom:24px; }
  .price-card { border:1px solid var(--border); padding:20px 16px; text-align:center; transition:border-color 0.3s; position:relative; cursor:none; }
  .price-card:hover,.price-card.popular { border-color:var(--green); }
  .popular-badge { position:absolute; top:-10px; left:50%; transform:translateX(-50%); background:var(--green); color:var(--bg); font-family:var(--mono); font-size:9px; letter-spacing:1px; padding:3px 10px; white-space:nowrap; }
  .price-plan { font-family:var(--mono); font-size:10px; letter-spacing:2px; color:var(--muted); text-transform:uppercase; margin-bottom:8px; }
  .price-amount { font-family:'Bebas Neue',sans-serif; font-size:36px; letter-spacing:1px; color:var(--text); line-height:1; }
  .price-period { font-family:var(--mono); font-size:10px; color:var(--muted); margin-bottom:14px; }
  .price-features { list-style:none; text-align:left; }
  .price-features li { font-family:var(--mono); font-size:10px; color:var(--muted); padding:3px 0; display:flex; gap:6px; }
  .price-features li::before { content:'‚úì'; color:var(--green); }

  /* Markets */
  .market-rows { display:flex; flex-direction:column; gap:8px; max-height:340px; overflow-y:auto; }
  .market-row { display:flex; justify-content:space-between; align-items:center; padding:10px 14px; border:1px solid var(--border); transition:background 0.2s; }
  .market-row:hover { background:var(--green-dim); }
  .market-sym { font-family:var(--mono); font-size:13px; font-weight:500; }
  .market-name { font-family:var(--mono); font-size:10px; color:var(--muted); }
  .market-price { font-family:var(--mono); font-size:13px; }
  .market-chg { font-family:var(--mono); font-size:12px; font-weight:500; }

  /* Profile card inside modal */
  .profile-card { border:1px solid var(--border); padding:20px; margin-bottom:20px; }
  .profile-row { display:flex; justify-content:space-between; align-items:center; padding:8px 0; border-bottom:1px solid var(--border); font-family:var(--mono); font-size:12px; }
  .profile-row:last-child { border-bottom:none; }
  .profile-key { color:var(--muted); letter-spacing:1px; }
  .profile-val { color:var(--text); font-weight:500; }

  /* TOAST */
  .toast { display:none; position:fixed; bottom:60px; right:30px; z-index:600; background:#061520; border-left:3px solid var(--green); padding:16px 24px; font-family:var(--mono); font-size:12px; color:var(--text); letter-spacing:1px; max-width:320px; line-height:1.6; box-shadow:0 8px 32px rgba(0,0,0,0.5); }
  .toast.error { border-left-color:var(--red); }
  .toast.success { border-left-color:var(--green); }

  /* DASHBOARD PAGE */
  .dashboard-page { display:none; min-height:100vh; padding:120px 60px 80px; }
  .dashboard-page.visible { display:block; }
  .dash-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:20px; margin-bottom:40px; }
  .dash-widget { background:var(--surface); border:1px solid var(--border); padding:24px; position:relative; }
  .dash-widget::before { content:''; position:absolute; top:0; left:20px; right:20px; height:1px; background:linear-gradient(90deg,transparent,var(--green),transparent); }
  .dash-widget-label { font-family:var(--mono); font-size:10px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); margin-bottom:12px; }
  .dash-widget-val { font-family:'Bebas Neue',sans-serif; font-size:48px; letter-spacing:2px; color:var(--text); line-height:1; }
  .dash-widget-sub { font-family:var(--mono); font-size:11px; color:var(--muted); margin-top:6px; }
  .dash-welcome { font-family:'Bebas Neue',sans-serif; font-size:52px; letter-spacing:2px; margin-bottom:10px; }
  .dash-welcome em { font-family:'DM Serif Display',serif; font-style:italic; color:var(--green); }
  .dash-sub { font-family:var(--mono); font-size:12px; color:var(--muted); letter-spacing:1px; margin-bottom:40px; }
  .dash-section-title { font-family:'Bebas Neue',sans-serif; font-size:28px; letter-spacing:2px; margin-bottom:16px; color:var(--text); }
  .module-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:16px; margin-bottom:40px; }
  .module-card { border:1px solid var(--border); padding:24px; transition:all 0.3s; cursor:none; position:relative; overflow:hidden; }
  .module-card::after { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:var(--green); transform:scaleX(0); transform-origin:left; transition:transform 0.4s; }
  .module-card:hover::after { transform:scaleX(1); }
  .module-card:hover { background:var(--green-dim); }
  .module-icon { font-size:28px; margin-bottom:12px; }
  .module-name { font-family:'DM Serif Display',serif; font-size:20px; margin-bottom:8px; }
  .module-desc { font-family:var(--mono); font-size:11px; color:var(--muted); line-height:1.7; }
  .module-tag { font-family:var(--mono); font-size:9px; letter-spacing:2px; text-transform:uppercase; color:var(--green); margin-top:14px; display:flex; align-items:center; gap:6px; }
  .module-tag::after { content:'‚Üí'; }

  /* Finance Chatbot Styles */
  .chatbot-fab {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 60px;
    height: 60px;
    background: var(--green);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(0, 220, 130, 0.4);
    z-index: 1000;
    transition: all 0.3s ease;
    font-size: 24px;
  }

  .chatbot-fab:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 30px rgba(0, 220, 130, 0.6);
  }

  .chatbot-fab.active {
    background: var(--red);
    transform: rotate(45deg);
  }

  .chatbot-popup {
    position: fixed;
    bottom: 100px;
    right: 30px;
    width: 380px;
    height: 500px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    z-index: 999;
    display: none;
    flex-direction: column;
    overflow: hidden;
    animation: slideUp 0.3s ease;
  }

  .chatbot-popup.open {
    display: flex;
  }

  .chatbot-header {
    background: rgba(0, 220, 130, 0.1);
    border-bottom: 1px solid var(--border);
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .chatbot-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 18px;
    letter-spacing: 2px;
    color: var(--text);
  }

  .chatbot-status {
    display: flex;
    align-items: center;
    gap: 6px;
    font-family: var(--mono);
    font-size: 10px;
    color: var(--muted);
  }

  .chatbot-status .status-dot {
    width: 6px;
    height: 6px;
    background: var(--green);
    border-radius: 50%;
    box-shadow: 0 0 6px var(--green);
    animation: pulse 2s infinite;
  }

  .chatbot-messages {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .message {
    display: flex;
    gap: 10px;
    max-width: 80%;
  }

  .bot-message {
    align-self: flex-start;
  }

  .user-message {
    align-self: flex-end;
    flex-direction: row-reverse;
  }

  .message-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    flex-shrink: 0;
  }

  .bot-message .message-avatar {
    background: var(--green);
  }

  .user-message .message-avatar {
    background: var(--amber);
  }

  .message-content {
    background: rgba(232, 244, 240, 0.05);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 10px 12px;
    flex: 1;
  }

  .user-message .message-content {
    background: rgba(0, 220, 130, 0.1);
    border-color: var(--green);
  }

  .message-content p {
    margin: 0 0 8px 0;
    color: var(--text);
    font-family: var(--mono);
    font-size: 11px;
    line-height: 1.4;
  }

  .message-content p:last-child {
    margin-bottom: 0;
  }

  .message-content ul {
    margin: 8px 0;
    padding-left: 15px;
  }

  .message-content li {
    color: var(--muted);
    font-family: var(--mono);
    font-size: 10px;
    margin: 3px 0;
  }

  .chatbot-input-container {
    padding: 15px;
    border-top: 1px solid var(--border);
  }

  .input-wrapper {
    display: flex;
    gap: 8px;
    margin-bottom: 8px;
  }

  .chat-input {
    flex: 1;
    background: rgba(232, 244, 240, 0.05);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 8px 12px;
    color: var(--text);
    font-family: var(--mono);
    font-size: 11px;
    outline: none;
    transition: all 0.3s;
  }

  .chat-input:focus {
    border-color: var(--green);
    background: rgba(232, 244, 240, 0.08);
  }

  .chat-input::placeholder {
    color: var(--muted);
  }

  .send-btn {
    background: var(--green);
    color: var(--bg);
    border: none;
    border-radius: 6px;
    padding: 8px 12px;
    font-family: var(--mono);
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.3s;
  }

  .send-btn:hover {
    opacity: 0.8;
  }

  .chatbot-warning {
    display: none;
    background: rgba(245, 166, 35, 0.1);
    border: 1px solid var(--amber);
    border-radius: 4px;
    padding: 6px 10px;
    color: var(--amber);
    font-family: var(--mono);
    font-size: 10px;
    text-align: center;
  }

  /* Scrollbar styling */
  .chatbot-messages::-webkit-scrollbar {
    width: 4px;
  }

  .chatbot-messages::-webkit-scrollbar-track {
    background: rgba(232, 244, 240, 0.05);
  }

  .chatbot-messages::-webkit-scrollbar-thumb {
    background: var(--green);
    border-radius: 2px;
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
</head>
<body>

<div class="cursor" id="cursor"></div>
<div class="cursor-ring" id="cursorRing"></div>
<div class="ticker-bar"></div>

<!-- NAV -->
  <div class="logo" onclick="showPage('home')" style="cursor:none;">
    <div class="logo-dot"></div>
    ALPHA
  </div>
  <ul class="nav-links" id="mainNavLinks">
    <li><a href="learning-module.html">Learning Module</a></li>
    <li><a href="alpha-rush.html">Alpha Rush</a></li>
    <li><a href="market-analyzer.html">Market Analyzer</a></li>
    <li><a href="portfolio-analyzer.html">Portfolio Analyzer</a></li>
    <li><a href="news-intelligence.html">News Intelligence</a></li>
  </ul>
  <!-- Guest buttons -->
  <div id="guestNav" style="display:flex; gap:12px; align-items:center;">
    <button class="nav-cta" style="border-color:var(--yellow);color:var(--yellow);"
      onmouseenter="this.style.background='var(--yellow)';this.style.color='#020b12'"
      onmouseleave="this.style.background='transparent';this.style.color='var(--yellow)'"
      onclick="openModal('login')">LOGIN</button>
    <button class="nav-cta" onclick="openModal('signup')">SIGN UP</button>
  </div>
  <!-- Logged-in user pill -->
  <div class="user-pill" id="userNav">
    <div class="user-avatar" id="userAvatar">A</div>
    <span class="user-name" id="userNameNav">User</span>
    <button class="nav-cta" style="font-size:11px;padding:7px 16px;" onclick="openModal('profile')">PROFILE</button>
    <button class="btn-logout" onclick="handleLogout()">LOG OUT</button>
  </div>
</nav>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODALS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

<!-- LOGIN MODAL -->
<div class="modal-overlay" id="modal-login" onclick="if(event.target===this)closeModal('login')">
  <div class="modal-box">
    <button class="modal-close" onclick="closeModal('login')">‚úï</button>
    <div class="modal-tag">Welcome Back</div>
    <div class="modal-title">SIGN IN TO<br>ALPHA</div>
    <div class="modal-form" id="loginForm">
      <input class="modal-input" type="email" id="login-email" placeholder="Email address" autocomplete="email">
      <div class="field-error" id="login-email-err"></div>
      <input class="modal-input" type="password" id="login-pass" placeholder="Password" autocomplete="current-password">
      <div class="field-error" id="login-pass-err"></div>
      <button class="modal-btn yellow" onclick="handleLogin()">LOGIN ‚Üí</button>
    </div>
    <div class="modal-divider"><span>OR</span></div>
    <button class="modal-btn outline" onclick="handleOAuth('Google')">üîê Continue with Google</button>
    <button class="modal-btn outline" style="margin-top:8px;" onclick="handleOAuth('GitHub')">üêô Continue with GitHub</button>
    <div class="modal-link">Don't have an account? <a href="#" onclick="closeModal('login');openModal('signup');return false;">Sign up free</a></div>
    <div class="modal-link" style="margin-top:6px;"><a href="#" onclick="handleForgotPassword();return false;">Forgot password?</a></div>
  </div>
</div>

<!-- SIGN UP MODAL -->
<div class="modal-overlay" id="modal-signup" onclick="if(event.target===this)closeModal('signup')">
  <div class="modal-box">
    <button class="modal-close" onclick="closeModal('signup')">‚úï</button>
    <div class="modal-tag">Create Account</div>
    <div class="modal-title">JOIN<br>ALPHA</div>
    <p class="modal-desc">Start for free. No credit card required.</p>
    <div class="modal-form">
      <input class="modal-input" type="text" id="su-name" placeholder="Full name" autocomplete="name">
      <div class="field-error" id="su-name-err"></div>
      <input class="modal-input" type="email" id="su-email" placeholder="Email address" autocomplete="email">
      <div class="field-error" id="su-email-err"></div>
      <input class="modal-input" type="password" id="su-pass" placeholder="Create password (min 6 chars)" autocomplete="new-password">
      <div class="field-error" id="su-pass-err"></div>
      <input class="modal-input" type="password" id="su-pass2" placeholder="Confirm password" autocomplete="new-password">
      <div class="field-error" id="su-pass2-err"></div>
      <select class="modal-input" id="su-level" style="appearance:none;">
        <option value="">Select Experience Level</option>
        <option value="Beginner Investor">Beginner Investor</option>
        <option value="Intermediate Trader">Intermediate Trader</option>
        <option value="Advanced / Professional">Advanced / Professional</option>
      </select>
      <div class="field-error" id="su-level-err"></div>
      <button class="modal-btn" onclick="handleSignUp()">CREATE ACCOUNT ‚Üí</button>
    </div>
    <div class="modal-divider"><span>OR</span></div>
    <button class="modal-btn outline" onclick="handleOAuth('Google')">üîê Continue with Google</button>
    <button class="modal-btn outline" style="margin-top:8px;" onclick="handleOAuth('GitHub')">üêô Continue with GitHub</button>
    <div class="modal-link">Already have an account? <a href="#" onclick="closeModal('signup');openModal('login');return false;">Sign in</a></div>
  </div>
</div>

<!-- PROFILE MODAL -->
<div class="modal-overlay" id="modal-profile" onclick="if(event.target===this)closeModal('profile')">
  <div class="modal-box">
    <button class="modal-close" onclick="closeModal('profile')">‚úï</button>
    <div class="modal-tag">My Account</div>
    <div class="modal-title">USER<br>PROFILE</div>
    <div class="profile-card" id="profileCard">
      <div class="profile-row"><span class="profile-key">NAME</span><span class="profile-val" id="p-name">‚Äî</span></div>
      <div class="profile-row"><span class="profile-key">EMAIL</span><span class="profile-val" id="p-email">‚Äî</span></div>
      <div class="profile-row"><span class="profile-key">LEVEL</span><span class="profile-val" id="p-level">‚Äî</span></div>
      <div class="profile-row"><span class="profile-key">MEMBER SINCE</span><span class="profile-val" id="p-since">‚Äî</span></div>
      <div class="profile-row"><span class="profile-key">PLAN</span><span class="profile-val" style="color:var(--green)">FREE TIER</span></div>
    </div>
    <div style="font-family:var(--mono);font-size:11px;color:var(--muted);letter-spacing:1px;margin-bottom:16px;">UPDATE PROFILE</div>
    <div class="modal-form" style="gap:10px;">
      <input class="modal-input" type="text" id="edit-name" placeholder="Update name">
      <select class="modal-input" id="edit-level" style="appearance:none;">
        <option value="">Update experience level</option>
        <option value="Beginner Investor">Beginner Investor</option>
        <option value="Intermediate Trader">Intermediate Trader</option>
        <option value="Advanced / Professional">Advanced / Professional</option>
      </select>
      <button class="modal-btn outline" onclick="handleUpdateProfile()" style="margin-top:0;">SAVE CHANGES</button>
    </div>
    <div style="margin-top:20px; border-top:1px solid var(--border); padding-top:20px;">
      <div style="font-family:var(--mono);font-size:11px;color:var(--muted);letter-spacing:1px;margin-bottom:12px;">CHANGE PASSWORD</div>
      <div class="modal-form" style="gap:10px;">
        <input class="modal-input" type="password" id="chg-old" placeholder="Current password">
        <input class="modal-input" type="password" id="chg-new" placeholder="New password (min 6 chars)">
        <button class="modal-btn outline" onclick="handleChangePassword()" style="margin-top:0;">UPDATE PASSWORD</button>
      </div>
    </div>
    <button class="modal-btn danger" style="margin-top:20px;" onclick="confirmDeleteAccount()">DELETE ACCOUNT</button>
  </div>
</div>

<!-- LEARNING MODULE MODAL -->
<div class="modal-overlay" id="modal-learning" onclick="if(event.target===this)closeModal('learning')">
  <div class="modal-box">
    <button class="modal-close" onclick="closeModal('learning')">‚úï</button>
    <div class="modal-tag">Learning Module</div>
    <div class="modal-title">MASTER<br>FINANCE</div>
    <p class="modal-desc">Structured AI-adaptive learning paths from zero to expert ‚Äî tracking your knowledge gaps in real time.</p>
    <div class="modal-features">
      <div class="modal-feat"><div class="modal-feat-icon">üî∞</div>Markets 101</div>
      <div class="modal-feat"><div class="modal-feat-icon">üìà</div>Technical Analysis</div>
      <div class="modal-feat"><div class="modal-feat-icon">üßÆ</div>Fundamental Analysis</div>
      <div class="modal-feat"><div class="modal-feat-icon">üåç</div>Macro Economics</div>
      <div class="modal-feat"><div class="modal-feat-icon">‚öôÔ∏è</div>Options & Derivatives</div>
      <div class="modal-feat"><div class="modal-feat-icon">ü§ñ</div>AI & Quant Strategies</div>
    </div>
    <button class="modal-btn" onclick="requireAuth('learning')">START LEARNING ‚Üí</button>
  </div>
</div>

<!-- ALPHA RUSH MODAL -->
<div class="modal-overlay" id="modal-alpharush" onclick="if(event.target===this)closeModal('alpharush')">
  <div class="modal-box">
    <button class="modal-close" onclick="closeModal('alpharush')">‚úï</button>
    <div class="modal-tag">Alpha Rush</div>
    <div class="modal-title">MARKET<br>PREDICTION ARENA</div>
    <p class="modal-desc">Practice predicting market movements in live simulated environments. Compete, build intuition, and sharpen your edge before risking real capital.</p>
    <div class="modal-features">
      <div class="modal-feat"><div class="modal-feat-icon">üéØ</div>Live Simulations</div>
      <div class="modal-feat"><div class="modal-feat-icon">üèÜ</div>Leaderboard</div>
      <div class="modal-feat"><div class="modal-feat-icon">üìä</div>Accuracy Tracking</div>
      <div class="modal-feat"><div class="modal-feat-icon">‚ö°</div>Real-time Challenges</div>
      <div class="modal-feat"><div class="modal-feat-icon">üß†</div>AI Feedback</div>
      <div class="modal-feat"><div class="modal-feat-icon">üéñÔ∏è</div>Achievement Badges</div>
    </div>
    <button class="modal-btn" onclick="requireAuth('alpharush')">ENTER THE ARENA ‚Üí</button>
  </div>
</div>

<!-- MARKET ANALYZER MODAL -->
<div class="modal-overlay" id="modal-marketanalyzer" onclick="if(event.target===this)closeModal('marketanalyzer')">
  <div class="modal-box">
    <button class="modal-close" onclick="closeModal('marketanalyzer')">‚úï</button>
    <div class="modal-tag">Live Markets</div>
    <div class="modal-title">MARKET<br>ANALYZER</div>
    <p class="modal-desc">Real-time prices via Finnhub API. Auto-refreshes every 60 seconds.</p>
    <div class="market-rows" id="modal-market-rows">
      <div style="font-family:var(--mono);font-size:11px;color:var(--muted);padding:12px 0;">Loading live prices‚Ä¶</div>
    </div>
    <br>
    <button class="modal-btn" onclick="requireAuth('marketanalyzer')">OPEN FULL ANALYZER ‚Üí</button>
    <button class="modal-btn outline" onclick="closeModal('marketanalyzer')">CLOSE</button>
  </div>
</div>

<!-- PORTFOLIO ANALYZER MODAL -->
<div class="modal-overlay" id="modal-portfolioanalyzer" onclick="if(event.target===this)closeModal('portfolioanalyzer')">
  <div class="modal-box">
    <button class="modal-close" onclick="closeModal('portfolioanalyzer')">‚úï</button>
    <div class="modal-tag">Portfolio Intelligence</div>
    <div class="modal-title">YOUR PORTFOLIO,<br>SUPERCHARGED</div>
    <p class="modal-desc">Connect your brokerage and let our AI analyze every position ‚Äî risk, correlation, rebalancing opportunities, and alpha signals.</p>
    <div class="modal-features">
      <div class="modal-feat"><div class="modal-feat-icon">üîó</div>Brokerage Connect</div>
      <div class="modal-feat"><div class="modal-feat-icon">‚öñÔ∏è</div>Risk Analysis</div>
      <div class="modal-feat"><div class="modal-feat-icon">üîÑ</div>Auto Rebalancing</div>
      <div class="modal-feat"><div class="modal-feat-icon">üìâ</div>Drawdown Alerts</div>
      <div class="modal-feat"><div class="modal-feat-icon">üéØ</div>Alpha Detection</div>
      <div class="modal-feat"><div class="modal-feat-icon">üìä</div>Performance Attribution</div>
    </div>
    <button class="modal-btn" onclick="requireAuth('portfolioanalyzer')">CONNECT MY PORTFOLIO ‚Üí</button>
  </div>
</div>

<!-- PRICING MODAL -->
<div class="modal-overlay" id="modal-pricing" onclick="if(event.target===this)closeModal('pricing')">
  <div class="modal-box" style="max-width:640px;">
    <button class="modal-close" onclick="closeModal('pricing')">‚úï</button>
    <div class="modal-tag">Pricing</div>
    <div class="modal-title">SIMPLE,<br>TRANSPARENT</div>
    <div class="pricing-grid">
      <div class="price-card">
        <div class="price-plan">Free</div>
        <div class="price-amount">$0</div>
        <div class="price-period">forever</div>
        <ul class="price-features">
          <li>5 learning modules</li>
          <li>Market overview</li>
          <li>Basic news feed</li>
          <li>1 portfolio</li>
        </ul>
      </div>
      <div class="price-card popular">
        <div class="popular-badge">MOST POPULAR</div>
        <div class="price-plan">Pro</div>
        <div class="price-amount">$29</div>
        <div class="price-period">per month</div>
        <ul class="price-features">
          <li>Unlimited modules</li>
          <li>Live market data</li>
          <li>AI news analyzer</li>
          <li>5 portfolios</li>
          <li>Strategy advisor</li>
        </ul>
      </div>
      <div class="price-card">
        <div class="price-plan">Elite</div>
        <div class="price-amount">$79</div>
        <div class="price-period">per month</div>
        <ul class="price-features">
          <li>Everything in Pro</li>
          <li>Unlimited portfolios</li>
          <li>API access</li>
          <li>Priority support</li>
          <li>Custom alerts</li>
        </ul>
      </div>
    </div>
    <button class="modal-btn" onclick="closeModal('pricing');openModal('signup')">SIGN UP FREE ‚Üí</button>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- API BANNER -->
<div id="apiBanner" style="display:none;position:fixed;top:80px;left:50%;transform:translateX(-50%);z-index:200;background:#061520;border:1px solid var(--amber);padding:14px 24px;font-family:var(--mono);font-size:12px;color:var(--amber);max-width:520px;text-align:center;line-height:1.7;">
  ‚ö† Enter your free <a href="https://finnhub.io/register" target="_blank" style="color:var(--green)">Finnhub API key</a> to enable live prices:
  <div style="display:flex;margin-top:10px;gap:8px;">
    <input id="apiKeyInput" placeholder="e.g. cq8abc1234xyz" style="flex:1;background:#020b12;border:1px solid var(--border);color:var(--text);padding:8px 12px;font-family:var(--mono);font-size:12px;outline:none;">
    <button onclick="saveApiKey()" style="background:var(--green);color:#020b12;border:none;padding:8px 16px;font-family:var(--mono);font-size:12px;font-weight:600;cursor:pointer;">SAVE</button>
  </div>
  <div style="font-size:10px;color:var(--muted);margin-top:6px;">Free tier: 60 calls/min ¬∑ No credit card needed</div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HOME PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="homePage">

<!-- HERO -->
<section class="hero">
  <div class="grid-bg"></div>
  <div class="blob blob-1"></div>
  <div class="blob blob-2"></div>
  <div class="hero-left">
    <div class="hero-tag">AI ¬∑ Finance ¬∑ Intelligence</div>
    <h1 class="hero-title">Invest<br><em>Smarter</em><br>With AI</h1>
    <p class="hero-sub">The first platform that unifies financial education, real-time market intelligence, and AI-driven portfolio strategy ‚Äî so you don't just learn finance, you master it.</p>
    <div class="hero-actions">
      <button class="btn-primary" onclick="openModal('signup')">START FOR FREE ‚Üí</button>
    </div>
    <div class="stats-strip">
      <div class="stat-item"><div class="stat-num">98.4%</div><div class="stat-label">Accuracy Rate</div></div>
      <div class="stat-item"><div class="stat-num">$2.1B</div><div class="stat-label">Portfolio Tracked</div></div>
    </div>
  </div>
  <div class="hero-right">
    <div class="float-card float-card-1">
      <div class="float-label">Portfolio Return</div>
      <div class="float-val" id="float-return" style="color:var(--green)">‚Äî</div>
    </div>
    <div class="float-card float-card-2">
      <div class="float-label">AI Confidence</div>
      <div class="float-val" style="color:var(--amber)">87%</div>
    </div>
    <div class="dashboard-card">
      <div class="card-header">
        <div class="card-title">Portfolio Intelligence</div>
        <div class="live-badge"><div class="live-dot"></div> LIVE</div>
      </div>
      <div class="chart-area">
        <svg viewBox="0 0 460 120" preserveAspectRatio="none">
          <defs>
            <linearGradient id="chartGrad" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="rgba(0,220,130,0.3)"/>
              <stop offset="100%" stop-color="rgba(0,220,130,0)"/>
            </linearGradient>
          </defs>
          <path d="M0,90 C30,80 60,70 100,55 C140,40 160,60 200,45 C240,30 270,20 310,15 C350,10 380,25 420,20 L460,18 L460,120 L0,120 Z" fill="url(#chartGrad)" opacity="0.6"/>
          <path d="M0,90 C30,80 60,70 100,55 C140,40 160,60 200,45 C240,30 270,20 310,15 C350,10 380,25 420,20 L460,18" fill="none" stroke="var(--green)" stroke-width="2" stroke-dasharray="1000" stroke-dashoffset="1000" style="animation:draw 2s 0.5s ease forwards;"/>
          <circle cx="460" cy="18" r="5" fill="var(--green)"/>
          <line x1="0" y1="30" x2="460" y2="30" stroke="rgba(255,255,255,0.05)" stroke-width="1"/>
          <line x1="0" y1="60" x2="460" y2="60" stroke="rgba(255,255,255,0.05)" stroke-width="1"/>
          <line x1="0" y1="90" x2="460" y2="90" stroke="rgba(255,255,255,0.05)" stroke-width="1"/>
        </svg>
      </div>
      <div class="ai-analysis">
        <div class="ai-icon">AI ‚ñ∏</div>
        <div class="ai-text">Fed rate pause <strong>‚Üë bullish signal</strong> for tech. NVIDIA earnings beat expectations ‚Äî <strong>portfolio exposure +2.3%</strong> recommended. Diversify into bonds ahead of CPI data.</div>
      </div>
      <div class="portfolio-rows">
        <div class="port-row"><div class="port-name">NVDA</div><div class="port-bar-wrap"><div class="port-bar" id="bar-nvda" style="width:10%;background:var(--green);"></div></div><div class="port-pct up" id="pct-nvda">‚Äî</div></div>
        <div class="port-row"><div class="port-name">AAPL</div><div class="port-bar-wrap"><div class="port-bar" id="bar-aapl" style="width:10%;background:var(--green);"></div></div><div class="port-pct up" id="pct-aapl">‚Äî</div></div>
        <div class="port-row"><div class="port-name">TSLA</div><div class="port-bar-wrap"><div class="port-bar" id="bar-tsla" style="width:10%;background:var(--red);"></div></div><div class="port-pct down" id="pct-tsla">‚Äî</div></div>
        <div class="port-row"><div class="port-name">BTC</div><div class="port-bar-wrap"><div class="port-bar" id="bar-btc" style="width:10%;background:var(--amber);"></div></div><div class="port-pct" id="pct-btc" style="color:var(--amber)">‚Äî</div></div>
      </div>
      <div id="lastUpdated" style="font-family:var(--mono);font-size:9px;color:var(--muted);letter-spacing:1px;margin-top:14px;text-align:right;">Fetching live data‚Ä¶ ¬∑ Refreshes every 1 min</div>
    </div>
  </div>
</section>

<!-- FEATURES -->
<section class="features">
  <div class="section-label">Core Modules</div>
  <h2 class="section-title">EVERYTHING YOU NEED TO TRADE WITH CONVICTION</h2>
  <div class="features-grid">
    <div class="feat-card" onclick="openModal('learning')">
      <div class="feat-num">01</div><div class="feat-icon">üìö</div>
      <div class="feat-name">Financial Education Engine</div>
      <div class="feat-desc">Adaptive learning paths from fundamentals to advanced derivatives ‚Äî guided by AI that tracks your knowledge gaps in real time.</div>
    </div>
    <div class="feat-card" onclick="openModal('alpharush')">
      <div class="feat-num">02</div><div class="feat-icon">üéØ</div>
      <div class="feat-name">Market Prediction Arena</div>
      <div class="feat-desc">Practice predicting market movements in live simulated environments. Build intuition before risking real capital.</div>
    </div>
    <div class="feat-card" onclick="openModal('marketanalyzer')">
      <div class="feat-num">03</div><div class="feat-icon">üì∞</div>
      <div class="feat-name">News Impact Analyzer</div>
      <div class="feat-desc">Understand how macro news, earnings, and global events move specific assets ‚Äî with AI sentiment scoring in milliseconds.</div>
    </div>
    <div class="feat-card" onclick="openModal('portfolioanalyzer')">
      <div class="feat-num">04</div><div class="feat-icon">üíº</div>
      <div class="feat-name">Portfolio Intelligence</div>
      <div class="feat-desc">Connect your brokerage. Get AI-driven analysis of risk exposure, rebalancing recommendations, and performance attribution.</div>
    </div>
    <div class="feat-card" onclick="openModal('pricing')">
      <div class="feat-num">05</div><div class="feat-icon">ü§ñ</div>
      <div class="feat-name">AI Strategy Advisor</div>
      <div class="feat-desc">Receive personalized strategic guidance based on your goals, risk appetite, and market conditions ‚Äî like a quant analyst in your pocket.</div>
    </div>
  </div>
</section>

<!-- NEWS SECTION -->
<section class="news-section">
  <div>
    <div class="section-label">News Impact Analyzer</div>
    <div class="ai-title">THE NEWS <em>MOVES</em> MARKETS.<br>NOW YOU'LL KNOW WHY.</div>
    <p class="ai-desc">Our AI processes thousands of financial news signals per second and maps their directional impact on your specific holdings ‚Äî so you're never caught off guard.</p>
    <div class="ai-chips">
      <span class="chip">Sentiment Scoring</span>
      <span class="chip">Impact Mapping</span>
      <span class="chip">Real-time Alerts</span>
      <span class="chip">Historical Correlation</span>
      <span class="chip">Sector Analysis</span>
    </div>
  </div>
  <div class="news-list">
    <div class="news-item"><div class="news-sentiment bullish">BULL</div><div><div class="news-headline">Fed signals pause in rate hikes amid cooling inflation data</div><div class="news-meta">Reuters ¬∑ 2 min ago</div></div><div class="news-impact up">+2.4%</div></div>
    <div class="news-item"><div class="news-sentiment bearish">BEAR</div><div><div class="news-headline">China manufacturing PMI contracts for third consecutive month</div><div class="news-meta">Bloomberg ¬∑ 14 min ago</div></div><div class="news-impact down">-1.7%</div></div>
    <div class="news-item"><div class="news-sentiment neutral">NEU</div><div><div class="news-headline">NVIDIA Q4 earnings beat estimates; guidance inline with expectations</div><div class="news-meta">WSJ ¬∑ 31 min ago</div></div><div class="news-impact" style="color:var(--amber)">+0.3%</div></div>
    <div class="news-item"><div class="news-sentiment bullish">BULL</div><div><div class="news-headline">Bitcoin ETF inflows hit record $1.2B in single trading session</div><div class="news-meta">CoinDesk ¬∑ 48 min ago</div></div><div class="news-impact up">+5.8%</div></div>
    <div class="news-item"><div class="news-sentiment bearish">BEAR</div><div><div class="news-headline">EU antitrust probe into Apple App Store deepens, fine looms</div><div class="news-meta">FT ¬∑ 1h ago</div></div><div class="news-impact down">-0.9%</div></div>
  </div>
</section>

<!-- CTA -->
<section class="cta-section">
  <p class="cta-eyebrow">Begin Your Journey</p>
  <h2 class="cta-title">STOP LEARNING.<br>START <em>WINNING</em>.</h2>
  <p class="cta-sub">Join our platform and replace guesswork with AI-powered intelligence. Free to start, always.</p>
  <div class="cta-input-row">
    <input class="cta-input" type="email" id="ctaEmail" placeholder="Enter your email address">
    <button class="cta-btn" onclick="handleCtaSignup()">GET ACCESS ‚Üí</button>
  </div>
</section>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-logo">ALPHA</div>
  <ul class="footer-links">
    <li><a href="#" onclick="openModal('pricing');return false;">Pricing</a></li>
    <li><a href="#">Privacy</a></li>
    <li><a href="#">Terms</a></li>
    <li><a href="#">Blog</a></li>
  </ul>
  <div class="footer-copy">¬© 2026 ALPHA. AI-Powered Finance.</div>
</footer>

</div><!-- end homePage -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DASHBOARD PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="dashboard-page" id="dashboardPage">
  <div class="dash-welcome">WELCOME BACK,<br><em id="dashUserName">INVESTOR</em></div>
  <div class="dash-sub" id="dashUserMeta">MEMBER SINCE ‚Äî ¬∑ EXPERIENCE LEVEL ‚Äî</div>

  <div class="dash-grid">
    <div class="dash-widget">
      <div class="dash-widget-label">Portfolio Return (Today)</div>
      <div class="dash-widget-val up" id="dash-return">‚Äî</div>
      <div class="dash-widget-sub">Avg. across NVDA, AAPL, TSLA, BTC</div>
    </div>
    <div class="dash-widget">
      <div class="dash-widget-label">AI Confidence Score</div>
      <div class="dash-widget-val" style="color:var(--amber)">87%</div>
      <div class="dash-widget-sub">Based on current macro signals</div>
    </div>
    <div class="dash-widget">
      <div class="dash-widget-label">Live Prices</div>
      <div class="dash-widget-val" style="font-size:28px;" id="dash-nvda-price">‚Äî</div>
      <div class="dash-widget-sub" id="dash-nvda-sub">NVDA ¬∑ Refreshes every 60s</div>
    </div>
  </div>

  <div class="dash-section-title">YOUR MODULES</div>
  <div class="module-grid">
    <div class="module-card" onclick="showToast('üìö Learning Module coming soon ‚Äî building your curriculum!','success')">
      <div class="module-icon">üìö</div>
      <div class="module-name">Learning Module</div>
      <div class="module-desc">Continue your AI-adaptive learning path. Your next lesson: Technical Analysis ‚Äî Moving Averages.</div>
      <div class="module-tag">Continue Learning</div>
    </div>
    <div class="module-card" onclick="showToast('üéØ Alpha Rush arena loading ‚Äî prepare to compete!','success')">
      <div class="module-icon">üéØ</div>
      <div class="module-name">Alpha Rush</div>
      <div class="module-desc">3 new prediction challenges available. Your accuracy rate: 74%. Top 15% on leaderboard.</div>
      <div class="module-tag">Enter Arena</div>
    </div>
    <div class="module-card" onclick="openModal('marketanalyzer')">
      <div class="module-icon">üì∞</div>
      <div class="module-name">Market Analyzer</div>
      <div class="module-desc">Live market overview with AI sentiment scoring. 5 new high-impact news signals detected today.</div>
      <div class="module-tag">View Markets</div>
    </div>
    <div class="module-card" onclick="openModal('portfolioanalyzer')">
      <div class="module-icon">üíº</div>
      <div class="module-name">Portfolio Analyzer</div>
      <div class="module-desc">Connect your brokerage to unlock full AI analysis. Risk score, rebalancing suggestions, and alpha signals.</div>
      <div class="module-tag">Connect Portfolio</div>
    </div>
  </div>

  <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
    <div class="dash-widget">
      <div class="dash-widget-label">Live Portfolio Snapshot</div>
      <div class="portfolio-rows" style="margin-top:12px;">
        <div class="port-row"><div class="port-name">NVDA</div><div class="port-bar-wrap"><div class="port-bar" id="d-bar-nvda" style="width:10%;background:var(--green);"></div></div><div class="port-pct up" id="d-pct-nvda">‚Äî</div></div>
        <div class="port-row"><div class="port-name">AAPL</div><div class="port-bar-wrap"><div class="port-bar" id="d-bar-aapl" style="width:10%;background:var(--green);"></div></div><div class="port-pct up" id="d-pct-aapl">‚Äî</div></div>
        <div class="port-row"><div class="port-name">TSLA</div><div class="port-bar-wrap"><div class="port-bar" id="d-bar-tsla" style="width:10%;background:var(--red);"></div></div><div class="port-pct down" id="d-pct-tsla">‚Äî</div></div>
        <div class="port-row"><div class="port-name">BTC</div><div class="port-bar-wrap"><div class="port-bar" id="d-bar-btc" style="width:10%;background:var(--amber);"></div></div><div class="port-pct" id="d-pct-btc" style="color:var(--amber)">‚Äî</div></div>
      </div>
    </div>
    <div class="dash-widget">
      <div class="dash-widget-label">AI Strategy Brief</div>
      <div class="ai-analysis" style="margin-top:12px;margin-bottom:0;">
        <div class="ai-icon">AI ‚ñ∏</div>
        <div class="ai-text">Based on your profile, consider increasing tech exposure. Fed pause is <strong>bullish</strong> for growth. BTC momentum is <strong>strong</strong> ‚Äî hold. Rotate TSLA into MSFT for lower volatility.</div>
      </div>
    </div>
  </div>
</div>

<!-- LIVE TICKER -->
<div class="live-ticker">
  <div class="ticker-label">LIVE ‚ñ∏</div>
  <div class="ticker-scroll" id="tickerScroll">
    <span class="ticker-item" style="color:var(--muted);font-family:var(--mono);font-size:11px;">Loading live prices‚Ä¶</span>
  </div>
</div>

<!-- Finance Chatbot -->
<div class="chatbot-fab" id="chatbotFab" onclick="toggleChatbot()">
  üí¨
</div>

<div class="chatbot-popup" id="chatbotPopup">
  <div class="chatbot-header">
    <div class="chatbot-title">üí¨ FINANCE ASSISTANT</div>
    <div class="chatbot-status">
      <div class="status-dot"></div>
      <span>Finance Only</span>
    </div>
  </div>
  <div class="chatbot-messages" id="chatMessages">
    <div class="message bot-message">
      <div class="message-avatar">ü§ñ</div>
      <div class="message-content">
        <p>Hello! I'm your finance assistant. I can help you with:</p>
        <ul>
          <li>Stock market analysis</li>
          <li>Financial concepts</li>
          <li>Trading strategies</li>
          <li>Investment advice</li>
          <li>Market trends</li>
        </ul>
        <p><strong>Please ask only finance-related questions.</strong></p>
      </div>
    </div>
  </div>
  <div class="chatbot-input-container">
    <div class="input-wrapper">
      <input type="text" id="chatInput" placeholder="Ask about stocks, finance, trading..." class="chat-input">
      <button id="sendBtn" class="send-btn">Send</button>
    </div>
    <div class="chatbot-warning" id="chatWarning">
      ‚ö†Ô∏è Only finance-related questions are allowed
    </div>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  AUTH SYSTEM ‚Äî localStorage-based user database
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const DB_KEY = 'alpha_users';
const SESSION_KEY = 'alpha_session';

function getUsers() {
  return JSON.parse(localStorage.getItem(DB_KEY) || '{}');
}
function saveUsers(users) {
  localStorage.setItem(DB_KEY, JSON.stringify(users));
}
function getSession() {
  return JSON.parse(localStorage.getItem(SESSION_KEY) || 'null');
}
function setSession(user) {
  localStorage.setItem(SESSION_KEY, JSON.stringify(user));
}
function clearSession() {
  localStorage.removeItem(SESSION_KEY);
}

let currentUser = getSession();

// ‚îÄ‚îÄ UI STATE ‚îÄ‚îÄ
function updateNavUI() {
  const guest = document.getElementById('guestNav');
  const userNav = document.getElementById('userNav');
  if (currentUser) {
    guest.style.display = 'none';
    userNav.classList.add('visible');
    document.getElementById('userAvatar').textContent = currentUser.name.charAt(0).toUpperCase();
    document.getElementById('userNameNav').textContent = currentUser.name.split(' ')[0].toUpperCase();
  } else {
    guest.style.display = 'flex';
    userNav.classList.remove('visible');
  }
}

function showPage(page) {
  document.getElementById('homePage').style.display = page === 'home' ? 'block' : 'none';
  document.getElementById('dashboardPage').classList.toggle('visible', page === 'dashboard');
  if (page === 'dashboard') updateDashboard();
}

function updateDashboard() {
  if (!currentUser) return;
  document.getElementById('dashUserName').textContent = currentUser.name.toUpperCase();
  document.getElementById('dashUserMeta').textContent =
    `MEMBER SINCE ${new Date(currentUser.since).toLocaleDateString('en-US', {month:'long', year:'numeric'})} ¬∑ ${currentUser.level}`;
  renderDashPortfolio();
}

// ‚îÄ‚îÄ SIGN UP ‚îÄ‚îÄ
function handleSignUp() {
  clearFieldErrors();
  const name   = document.getElementById('su-name').value.trim();
  const email  = document.getElementById('su-email').value.trim().toLowerCase();
  const pass   = document.getElementById('su-pass').value;
  const pass2  = document.getElementById('su-pass2').value;
  const level  = document.getElementById('su-level').value;

  let valid = true;
  if (!name)  { setErr('su-name-err','Name is required'); valid=false; }
  if (!email || !email.includes('@')) { setErr('su-email-err','Valid email required'); valid=false; }
  if (pass.length < 6)  { setErr('su-pass-err','Minimum 6 characters'); valid=false; }
  if (pass !== pass2)   { setErr('su-pass2-err','Passwords do not match'); valid=false; }
  if (!level)           { setErr('su-level-err','Please select your experience level'); valid=false; }
  if (!valid) return;

  const users = getUsers();
  if (users[email]) { setErr('su-email-err','Account already exists ‚Äî sign in instead'); return; }

  const newUser = { name, email, password: btoa(pass), level, since: Date.now(), plan: 'Free' };
  users[email] = newUser;
  saveUsers(users);
  currentUser = newUser;
  setSession(newUser);

  closeModal('signup');
  updateNavUI();
  showPage('dashboard');
  showToast(`üéâ Welcome to ALPHA, ${name.split(' ')[0]}! Your account is ready.`, 'success', 5000);
}

// ‚îÄ‚îÄ LOGIN ‚îÄ‚îÄ
function handleLogin() {
  clearFieldErrors();
  const email = document.getElementById('login-email').value.trim().toLowerCase();
  const pass  = document.getElementById('login-pass').value;

  if (!email || !email.includes('@')) { setErr('login-email-err','Valid email required'); return; }
  if (!pass) { setErr('login-pass-err','Password is required'); return; }

  const users = getUsers();
  const user  = users[email];

  if (!user) { setErr('login-email-err','No account found with this email'); return; }
  if (user.password !== btoa(pass)) { setErr('login-pass-err','Incorrect password'); return; }

  currentUser = user;
  setSession(user);
  closeModal('login');
  updateNavUI();
  showPage('dashboard');
  showToast(`‚úì Welcome back, ${user.name.split(' ')[0]}!`, 'success');
}

// ‚îÄ‚îÄ LOGOUT ‚îÄ‚îÄ
function handleLogout() {
  currentUser = null;
  clearSession();
  updateNavUI();
  showPage('home');
  showToast('‚úì You have been logged out.', 'success');
}

// ‚îÄ‚îÄ FORGOT PASSWORD ‚îÄ‚îÄ
function handleForgotPassword() {
  const email = document.getElementById('login-email').value.trim().toLowerCase();
  if (!email || !email.includes('@')) { setErr('login-email-err','Enter your email first'); return; }
  const users = getUsers();
  if (!users[email]) { setErr('login-email-err','No account found with this email'); return; }
  closeModal('login');
  showToast(`üìß Password reset link sent to ${email}`, 'success');
}

// ‚îÄ‚îÄ UPDATE PROFILE ‚îÄ‚îÄ
function handleUpdateProfile() {
  if (!currentUser) return;
  const name  = document.getElementById('edit-name').value.trim();
  const level = document.getElementById('edit-level').value;
  if (!name && !level) { showToast('‚ö† Enter a new name or level to update.', 'error'); return; }

  const users = getUsers();
  if (name) { currentUser.name = name; }
  if (level) { currentUser.level = level; }
  users[currentUser.email] = currentUser;
  saveUsers(users);
  setSession(currentUser);
  updateNavUI();
  populateProfileModal();
  showToast('‚úì Profile updated successfully.', 'success');
}

// ‚îÄ‚îÄ CHANGE PASSWORD ‚îÄ‚îÄ
function handleChangePassword() {
  if (!currentUser) return;
  const oldPass = document.getElementById('chg-old').value;
  const newPass = document.getElementById('chg-new').value;
  if (!oldPass || !newPass) { showToast('‚ö† Fill in both fields.', 'error'); return; }
  if (currentUser.password !== btoa(oldPass)) { showToast('‚ö† Current password is incorrect.', 'error'); return; }
  if (newPass.length < 6) { showToast('‚ö† New password must be at least 6 characters.', 'error'); return; }

  const users = getUsers();
  currentUser.password = btoa(newPass);
  users[currentUser.email] = currentUser;
  saveUsers(users);
  setSession(currentUser);
  document.getElementById('chg-old').value = '';
  document.getElementById('chg-new').value = '';
  showToast('‚úì Password updated successfully.', 'success');
}

// ‚îÄ‚îÄ DELETE ACCOUNT ‚îÄ‚îÄ
function confirmDeleteAccount() {
  if (!currentUser) return;
  if (!confirm(`Are you sure you want to permanently delete your account (${currentUser.email})? This cannot be undone.`)) return;
  const users = getUsers();
  delete users[currentUser.email];
  saveUsers(users);
  closeModal('profile');
  handleLogout();
  showToast('Account deleted. Sorry to see you go.', 'error', 5000);
}

// ‚îÄ‚îÄ OAUTH (DEMO) ‚îÄ‚îÄ
function handleOAuth(provider) {
  closeModal('login');
  closeModal('signup');
  // Simulate OAuth by creating a demo account
  const demoEmail = `${provider.toLowerCase()}_demo@alpha.ai`;
  const users = getUsers();
  if (!users[demoEmail]) {
    users[demoEmail] = { name: `${provider} User`, email: demoEmail, password: btoa('oauth'), level: 'Beginner Investor', since: Date.now(), plan: 'Free' };
    saveUsers(users);
  }
  currentUser = users[demoEmail];
  setSession(currentUser);
  updateNavUI();
  showPage('dashboard');
  showToast(`‚úì Signed in via ${provider}`, 'success');
}

// ‚îÄ‚îÄ REQUIRE AUTH GUARD ‚îÄ‚îÄ
function requireAuth(module) {
  if (currentUser) {
    closeModal(module === 'marketanalyzer' ? 'marketanalyzer' : module);
    showPage('dashboard');
    showToast(`‚úì Opening ${module.replace(/([A-Z])/g,' $1')} module‚Ä¶`, 'success');
  } else {
    closeModal(module);
    showToast('‚ö† Please sign in or create a free account to access this module.', 'error');
    setTimeout(() => openModal('signup'), 1200);
  }
}

// ‚îÄ‚îÄ POPULATE PROFILE MODAL ‚îÄ‚îÄ
function populateProfileModal() {
  if (!currentUser) return;
  document.getElementById('p-name').textContent = currentUser.name;
  document.getElementById('p-email').textContent = currentUser.email;
  document.getElementById('p-level').textContent = currentUser.level;
  document.getElementById('p-since').textContent = new Date(currentUser.since).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'});
}

// ‚îÄ‚îÄ CTA EMAIL SIGNUP ‚îÄ‚îÄ
function handleCtaSignup() {
  const email = document.getElementById('ctaEmail').value.trim();
  if (!email || !email.includes('@')) { showToast('‚ö† Enter a valid email address.', 'error'); return; }
  document.getElementById('su-email').value = email;
  document.getElementById('ctaEmail').value = '';
  openModal('signup');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  MODAL SYSTEM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openModal(id) {
  const el = document.getElementById('modal-' + id);
  if (!el) return;
  el.classList.add('active');
  document.body.style.overflow = 'hidden';
  if (id === 'marketanalyzer') populateMarketsModal();
  if (id === 'profile') populateProfileModal();
}
function closeModal(id) {
  const el = document.getElementById('modal-' + id);
  if (!el) return;
  el.classList.remove('active');
  document.body.style.overflow = '';
}
document.addEventListener('keydown', e => {
  if (e.key === 'Escape') {
    document.querySelectorAll('.modal-overlay.active').forEach(m => m.classList.remove('active'));
    document.body.style.overflow = '';
  }
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  TOAST
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showToast(msg, type = 'success', duration = 3500) {
  const t = document.getElementById('toast');
  t.innerHTML = msg;
  t.className = 'toast ' + type;
  t.style.display = 'block';
  clearTimeout(t._timer);
  t._timer = setTimeout(() => { t.style.display = 'none'; }, duration);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  FORM HELPERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function setErr(id, msg) {
  const el = document.getElementById(id);
  if (el) el.textContent = msg;
  const inputId = id.replace('-err','');
  const inp = document.getElementById(inputId);
  if (inp) inp.classList.add('error');
}
function clearFieldErrors() {
  document.querySelectorAll('.field-error').forEach(e => e.textContent = '');
  document.querySelectorAll('.modal-input.error').forEach(e => e.classList.remove('error'));
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  LIVE MARKET API ‚Äî Finnhub
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const FINNHUB_KEY = 'd0a5g9pr01qgdvklqp3gd0a5g9pr01qgdvklqp40';
const STOCKS  = ['AAPL','NVDA','TSLA','MSFT','AMZN','GOOGL','META','SPY','NFLX','AMD'];
const CRYPTOS = [{ symbol:'BINANCE:BTCUSDT', label:'BTC' }, { symbol:'BINANCE:ETHUSDT', label:'ETH' }];
const PORTFOLIO_SYMS = [
  { sym:'NVDA',             label:'NVDA', bars:['bar-nvda','d-bar-nvda'], pcts:['pct-nvda','d-pct-nvda'] },
  { sym:'AAPL',             label:'AAPL', bars:['bar-aapl','d-bar-aapl'], pcts:['pct-aapl','d-pct-aapl'] },
  { sym:'TSLA',             label:'TSLA', bars:['bar-tsla','d-bar-tsla'], pcts:['pct-tsla','d-pct-tsla'] },
  { sym:'BINANCE:BTCUSDT',  label:'BTC',  bars:['bar-btc','d-bar-btc'],  pcts:['pct-btc','d-pct-btc']  },
];
let apiKey = FINNHUB_KEY;
let priceCache = {};
let refreshTimer = null;
let countdown = 60;

function saveApiKey() {
  const v = document.getElementById('apiKeyInput').value.trim();
  if (v) { apiKey = v; document.getElementById('apiBanner').style.display = 'none'; init(); }
}
async function getQuote(symbol) {
  const r = await fetch(`https://finnhub.io/api/v1/quote?symbol=${encodeURIComponent(symbol)}&token=${apiKey}`);
  if (!r.ok) throw new Error('HTTP ' + r.status);
  return r.json();
}
async function fetchAll() {
  const syms = [...STOCKS, ...CRYPTOS.map(c => c.symbol)];
  const res = await Promise.allSettled(syms.map(s => getQuote(s)));
  res.forEach((r, i) => { if (r.status === 'fulfilled' && r.value.c) priceCache[syms[i]] = r.value; });
}
function fmt(p, crypto=false) { if(!p) return '‚Äî'; return crypto ? '$'+p.toLocaleString('en-US',{maximumFractionDigits:0}) : '$'+p.toFixed(2); }
function pct(c,pc) { if(!c||!pc) return null; return ((c-pc)/pc)*100; }
function fmtPct(p) { if(p===null) return '‚Äî'; return (p>=0?'+':'')+p.toFixed(2)+'%'; }

function renderTicker() {
  const items = [];
  STOCKS.forEach(sym => {
    const d = priceCache[sym]; if (!d) return;
    const p = pct(d.c,d.pc); const cls = p>=0?'up':'down';
    items.push(`<span class="ticker-item"><span class="ticker-sym">${sym}</span><span class="ticker-price">${fmt(d.c)}</span><span class="${cls}">${fmtPct(p)}</span></span>`);
  });
  CRYPTOS.forEach(({symbol,label}) => {
    const d = priceCache[symbol]; if (!d) return;
    const p = pct(d.c,d.pc); const cls = p>=0?'up':'down';
    items.push(`<span class="ticker-item"><span class="ticker-sym">${label}</span><span class="ticker-price">${fmt(d.c,true)}</span><span class="${cls}">${fmtPct(p)}</span></span>`);
  });
  if (!items.length) return;
  document.getElementById('tickerScroll').innerHTML = [...items,...items].join('');
}

function renderPortfolio() {
  const absVals = PORTFOLIO_SYMS.map(({sym}) => { const d=priceCache[sym]; return d ? Math.abs(pct(d.c,d.pc)||0) : 0; });
  const maxP = Math.max(...absVals, 1);
  let totalPct = 0; let count = 0;
  PORTFOLIO_SYMS.forEach(({sym, bars, pcts}) => {
    const d = priceCache[sym]; if (!d) return;
    const p = pct(d.c,d.pc); if(p!==null){totalPct+=p; count++;}
    const barW = Math.max(8, (Math.abs(p||0)/maxP)*95);
    const color = (p||0)>=0 ? 'var(--green)' : 'var(--red)';
    const cls   = (p||0)>=0 ? 'up' : 'down';
    bars.forEach(id => { const el=document.getElementById(id); if(el){el.style.width=barW+'%';el.style.background=color;} });
    pcts.forEach(id => { const el=document.getElementById(id); if(el){el.textContent=fmtPct(p);el.className='port-pct '+cls;} });
  });
  const avg = count ? totalPct/count : 0;
  const retEl = document.getElementById('float-return');
  if (retEl) { retEl.textContent = fmtPct(avg); retEl.style.color = avg>=0?'var(--green)':'var(--red)'; }
  const dashRet = document.getElementById('dash-return');
  if (dashRet) { dashRet.textContent = fmtPct(avg); dashRet.className = 'dash-widget-val '+(avg>=0?'up':'down'); }
  const nvdaD = priceCache['NVDA'];
  const dashNvda = document.getElementById('dash-nvda-price');
  if (dashNvda && nvdaD) dashNvda.textContent = fmt(nvdaD.c);
}

function renderDashPortfolio() { renderPortfolio(); }

function updateStamp() {
  countdown = 60;
  const el = document.getElementById('lastUpdated');
  if (el) el.textContent = `Updated ${new Date().toLocaleTimeString()} ¬∑ Next refresh in 60s`;
}

setInterval(() => {
  const el = document.getElementById('lastUpdated');
  if (!el || countdown <= 0) return;
  countdown--;
  const parts = el.textContent.split(' ¬∑ ');
  el.textContent = `${parts[0]} ¬∑ Next refresh in ${countdown}s`;
}, 1000);

async function refresh() {
  try {
    await fetchAll();
    renderTicker();
    renderPortfolio();
    updateStamp();
  } catch (e) {
    console.warn('Finnhub error:', e.message);
    if (e.message.includes('401') || e.message.includes('403')) {
      document.getElementById('apiBanner').style.display = 'block';
      clearInterval(refreshTimer);
    }
  }
}
async function init() {
  if (!apiKey) { document.getElementById('apiBanner').style.display = 'block'; return; }
  await refresh();
  clearInterval(refreshTimer);
  refreshTimer = setInterval(refresh, 60000);
}

// ‚îÄ‚îÄ MARKETS MODAL ‚îÄ‚îÄ
function populateMarketsModal() {
  const container = document.getElementById('modal-market-rows');
  const labels = { AAPL:'Apple Inc.',NVDA:'NVIDIA Corp.',TSLA:'Tesla Inc.',MSFT:'Microsoft Corp.',AMZN:'Amazon.com',GOOGL:'Alphabet Inc.',META:'Meta Platforms',SPY:'S&P 500 ETF',NFLX:'Netflix Inc.',AMD:'Advanced Micro Devices',BTC:'Bitcoin',ETH:'Ethereum' };
  let html = '';
  STOCKS.forEach(sym => {
    const d = priceCache[sym]; if (!d||!d.c) return;
    const p = d.pc ? ((d.c-d.pc)/d.pc*100) : 0;
    const cls = p>=0?'up':'down'; const sign = p>=0?'+':'';
    html += `<div class="market-row"><div><div class="market-sym">${sym}</div><div class="market-name">${labels[sym]||sym}</div></div><div style="text-align:right"><div class="market-price">$${d.c.toFixed(2)}</div><div class="market-chg ${cls}">${sign}${p.toFixed(2)}%</div></div></div>`;
  });
  CRYPTOS.forEach(({symbol,label}) => {
    const d = priceCache[symbol]; if (!d||!d.c) return;
    const p = d.pc ? ((d.c-d.pc)/d.pc*100) : 0;
    const cls = p>=0?'up':'down'; const sign = p>=0?'+':'';
    html += `<div class="market-row"><div><div class="market-sym">${label}</div><div class="market-name">${labels[label]||label}</div></div><div style="text-align:right"><div class="market-price">$${d.c.toLocaleString('en-US',{maximumFractionDigits:0})}</div><div class="market-chg ${cls}">${sign}${p.toFixed(2)}%</div></div></div>`;
  });
  container.innerHTML = html || '<div style="font-family:var(--mono);font-size:11px;color:var(--muted);padding:12px 0;">No live data yet ‚Äî API connecting‚Ä¶</div>';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  CURSOR
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const cursor = document.getElementById('cursor');
const ring = document.getElementById('cursorRing');
let mx=0,my=0,rx=0,ry=0;
document.addEventListener('mousemove', e => { mx=e.clientX; my=e.clientY; cursor.style.left=(mx-6)+'px'; cursor.style.top=(my-6)+'px'; });
function animRing() { rx+=(mx-rx)*0.12; ry+=(my-ry)*0.12; ring.style.left=(rx-18)+'px'; ring.style.top=(ry-18)+'px'; requestAnimationFrame(animRing); }
animRing();
document.addEventListener('mouseover', e => {
  if (e.target.matches('button,a,.feat-card,.news-item,.module-card,.price-card,.chip,.modal-feat')) {
    cursor.style.transform='scale(2)'; ring.style.transform='scale(1.5)'; ring.style.borderColor='rgba(0,220,130,0.8)';
  } else {
    cursor.style.transform='scale(1)'; ring.style.transform='scale(1)'; ring.style.borderColor='rgba(0,220,130,0.4)';
  }
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  FINANCE CHATBOT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
class FinanceChatbot {
  constructor() {
    this.financeKeywords = [
      'stock', 'stocks', 'share', 'shares', 'market', 'markets', 'trading', 'trade',
      'invest', 'investment', 'investing', 'portfolio', 'dividend', 'finance', 'financial',
      'money', 'price', 'prices', 'bull', 'bear', 'bullish', 'bearish', 'volatility',
      'crypto', 'bitcoin', 'ethereum', 'forex', 'currency', 'commodity', 'commodities',
      'bond', 'bonds', 'mutual fund', 'etf', 'index', 'indices', 'nasdaq', 'dow',
      'sp500', 'earnings', 'revenue', 'profit', 'loss', 'capital', 'asset', 'assets',
      'risk', 'return', 'roi', 'analysis', 'technical', 'fundamental', 'chart', 'trend',
      'support', 'resistance', 'buy', 'sell', 'hold', 'long', 'short', 'leverage',
      'margin', 'option', 'options', 'future', 'futures', 'hedge', 'arbitrage', 'broker',
      'exchange', 'sec', 'regulation', 'economy', 'inflation', 'interest', 'rate',
      'gdp', 'recession', 'growth', 'valuation', 'pe ratio', 'market cap', 'liquidity'
    ];
    
    this.init();
  }
  
  init() {
    this.chatInput = document.getElementById('chatInput');
    this.sendBtn = document.getElementById('sendBtn');
    this.chatMessages = document.getElementById('chatMessages');
    this.chatWarning = document.getElementById('chatWarning');
    this.chatbotFab = document.getElementById('chatbotFab');
    this.chatbotPopup = document.getElementById('chatbotPopup');
    
    if (this.sendBtn && this.chatInput) {
      this.sendBtn.addEventListener('click', () => this.sendMessage());
      this.chatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') this.sendMessage();
      });
    }
  }
  
  isFinanceRelated(message) {
    const lowerMessage = message.toLowerCase();
    return this.financeKeywords.some(keyword => lowerMessage.includes(keyword));
  }
  
  generateFinanceResponse(message) {
    const lowerMessage = message.toLowerCase();
    
    // Stock market related
    if (lowerMessage.includes('stock') || lowerMessage.includes('share')) {
      return "Stocks represent ownership in a company. When you buy a stock, you become a shareholder. Stock prices fluctuate based on company performance, market conditions, and investor sentiment. Always research companies before investing and consider diversifying your portfolio.";
    }
    
    // Trading related
    if (lowerMessage.includes('trade') || lowerMessage.includes('trading')) {
      return "Trading involves buying and selling financial instruments. Key principles include: risk management, technical analysis, fundamental analysis, and having a clear strategy. Remember that trading involves risk of loss and isn't suitable for everyone.";
    }
    
    // Investment related
    if (lowerMessage.includes('invest') || lowerMessage.includes('investment')) {
      return "Investing is putting money to work to earn returns. Common investment types include stocks, bonds, ETFs, and mutual funds. Key factors to consider: risk tolerance, time horizon, diversification, and your financial goals.";
    }
    
    // Market analysis
    if (lowerMessage.includes('analysis') || lowerMessage.includes('chart') || lowerMessage.includes('trend')) {
      return "Market analysis includes technical analysis (charts, patterns, indicators) and fundamental analysis (company financials, industry trends). Both approaches help in making informed investment decisions.";
    }
    
    // Risk management
    if (lowerMessage.includes('risk') || lowerMessage.includes('loss')) {
      return "Risk management is crucial in finance. Key strategies include: diversification, position sizing, stop-loss orders, and never investing more than you can afford to lose. Remember that higher returns typically come with higher risk.";
    }
    
    // General finance advice
    return "That's a great finance question! Remember these key principles: 1) Always do your research before investing, 2) Diversify your portfolio to spread risk, 3) Have clear financial goals, 4) Understand your risk tolerance, 5) Consider consulting with a financial advisor for personalized advice.";
  }
  
  sendMessage() {
    const message = this.chatInput.value.trim();
    if (!message) return;
    
    // Check if message is finance-related
    if (!this.isFinanceRelated(message)) {
      this.showWarning();
      this.addBotMessage("‚ùå I can only answer finance and stock-related questions. Please ask about topics like stocks, trading, investments, market analysis, or financial concepts.");
      this.chatInput.value = '';
      return;
    }
    
    // Hide warning if shown
    this.hideWarning();
    
    // Add user message
    this.addUserMessage(message);
    
    // Generate and add bot response
    const response = this.generateFinanceResponse(message);
    setTimeout(() => {
      this.addBotMessage(response);
    }, 500);
    
    // Clear input
    this.chatInput.value = '';
  }
  
  addUserMessage(message) {
    const messageDiv = document.createElement('div');
    messageDiv.className = 'message user-message';
    messageDiv.innerHTML = `
      <div class="message-avatar">üë§</div>
      <div class="message-content">
        <p>${message}</p>
      </div>
    `;
    this.chatMessages.appendChild(messageDiv);
    this.scrollToBottom();
  }
  
  addBotMessage(message) {
    const messageDiv = document.createElement('div');
    messageDiv.className = 'message bot-message';
    messageDiv.innerHTML = `
      <div class="message-avatar">ü§ñ</div>
      <div class="message-content">
        <p>${message}</p>
      </div>
    `;
    this.chatMessages.appendChild(messageDiv);
    this.scrollToBottom();
  }
  
  showWarning() {
    if (this.chatWarning) {
      this.chatWarning.style.display = 'block';
      setTimeout(() => {
        this.hideWarning();
      }, 3000);
    }
  }
  
  hideWarning() {
    if (this.chatWarning) {
      this.chatWarning.style.display = 'none';
    }
  }
  
  scrollToBottom() {
    this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
  }
}

// Toggle chatbot popup
function toggleChatbot() {
  const fab = document.getElementById('chatbotFab');
  const popup = document.getElementById('chatbotPopup');
  
  if (popup.classList.contains('open')) {
    popup.classList.remove('open');
    fab.classList.remove('active');
  } else {
    popup.classList.add('open');
    fab.classList.add('active');
  }
}

// Initialize chatbot when page loads
document.addEventListener('DOMContentLoaded', () => {
  new FinanceChatbot();
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  SCROLL ANIMATIONS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => { if (entry.isIntersecting) entry.target.style.animation = 'slideUp 0.8s ease forwards'; });
}, { threshold: 0.1 });
document.querySelectorAll('.feat-card').forEach((card,i) => {
  card.style.opacity='0'; card.style.transform='translateY(30px)';
  card.style.transitionDelay=`${i*0.1}s`; observer.observe(card);
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  BOOT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
updateNavUI();
if (currentUser) showPage('dashboard');
else showPage('home');
init();
</script>
</body>
</html>